<?php
/**
 * @file
 * .install
 */


/**
 * 
 */
function islandora_restrict_object_management_install() {
  // Create a field.
  $field = array(
    'field_name'  => ISLANDORA_RESTRICT_OBJECT_MANAGEMENT_FIELD_NAME,
    'cardinality' => -1,
    'type'        => 'text',
    'settings'    => array('maxlength' => 255),
  );
  field_create_field($field);

  // Attach an existing field to the user object
  $instance = array(
    'field_name' => ISLANDORA_RESTRICT_OBJECT_MANAGEMENT_FIELD_NAME,
    'entity_type' => 'user',
    'bundle' => 'user',
    'label' => 'Institution',
    'widget' => array(
      'type' => 'text_textfield', // or whatever widget type you want
    ),
  );
  field_create_instance($instance);
}

/**
 * 
 */
function islandora_restrict_object_management_uninstall() {
  field_delete_field(ISLANDORA_RESTRICT_OBJECT_MANAGEMENT_FIELD_NAME);
  field_purge_batch(1);
}